% -*- mode: latex; eval: (flyspell-mode 1); ispell-local-dictionary: "american"; TeX-master: t; -*-

\documentclass[12pt]{article}


\usepackage{hyperref,amsthm,amsmath,amsfonts,enumerate,stmaryrd}

\newcommand{\bZ}{\mathbb{Z}}

\newcommand{\ttx}{\mathtt{x}}
\newcommand{\tty}{\mathtt{y}}


\newcommand{\bN}{\mathbb{N}} %{\bZ_{\ge 0}}
\newcommand{\bNast}{ \bZ_{> 0}} %{\bN \setminus \{ 0 \}}
\newcommand{\bNdeux}{\bZ_{\ge 2}}
\newcommand{\bNtrois}{\bZ_{> 2}}



\newcommand{\seg}[2]{\left\llbracket#1, #2 \right\rrbracket}

\newcommand{\RS}{\mathrm{RS}}



\newtheorem{theorem}{Theorem}
\newtheorem{lemma}{Lemma}

 \theoremstyle{definition}
 \newtheorem{exercise}{Exercise}
% \newtheorem{example}{Example}
\newenvironment{solution}{\begin{proof}[Solution.]}{\end{proof}}

\begin{document}

\include{maintheorem}

\cite{HullDobell62}   
\cite{Knuth97}
\bibliographystyle{plain}
\bibliography{gen}

\end{document}

\begin{theorem} \label{thm:ax+b-solution-S}
  Let $a$, $b \in \bZ$ and let $\left( u_n \right)_{n \in \bN} \in \bZ^{\bN}$.
  Equality $u_{n + 1} = a u_n + b$ holds true for every $n \in \bN$
  if, and only if,
  equality
  $$
  u_n = S(n, a) ((a - 1) u_0 + b)  + u_0
  $$
  holds true for every $n \in \bN$.
\end{theorem}

Let $m \in \bZ$ and let $X \subseteq \bZ$.
% Let $\equiv$ denote the congruence relation modulo~$m$.
We say that $X$ is a \emph{complete residue system (CRS) modulo $m$}
if for each $y \in \bZ$, there exists a unique $x \in X$ such that $y \equiv x \pmod{m}$.
If $m \ne 0$ then the cardinality of every CRS modulo $m$ is equal to $| m |$.
If $m = 0$ then $\bZ$ is the unique CRS modulo~$m$.
Put
$$
\RS(a) = \left\{ S(n, a) : n \in \bNast \right\}
$$
for each $a \in \bZ$.

\begin{theorem} \label{thm:contains-CRS-implies-rho-divides-m}
  For every $a$, $m \in \bZ$ such that $\RS(a)$ contains a CRS modulo $m$,
  $m$ is non-zero and $\rho'(m)$ divides $a - 1$.
\end{theorem}




\begin{theorem} \label{thm:p-divides-a-1}
  For every $a$, $p \in \bZ$ such that $p$ is prime and $\RS(a)$ contains a CRS modulo $p$,
  $p$ divides $a - 1$.  
\end{theorem}

\begin{proof}
  Let $\equiv$ denote the congruence relation modulo~$p$.
%  Without loss of generality, we may assume $| p | \ne 1$.
  Assume that $\RS(a)$ contains a CRS modulo $p$ and
  that $p$ and $a - 1$ are coprime.
  Then, there exists $i \in \bNast$ such that $S(i, a) \equiv 0$,
  there exists $b \in \bZ$ such that $(a - 1)b \equiv 1$, and subsequently,
  there exists $j \in \bNast$ such that $S(j, a) \equiv - b$.
  On the one hand, we have
  $$
  -  S(i - 1, a) a = 1 - S(i, a) \equiv 1 
  $$
  whence $p$ and $a$ are coprime.
  On the other hand, we have 
  $$
  a^j  - 1 =  (a - 1) S(j, a) \equiv (a - 1) (- b) \equiv - 1 \,,
  $$
  whence $a^j \equiv 0$, or equivalently, $p$ divides $a^j$.
  Therefore, $p$ is not prime.
\end{proof}

\begin{theorem}
  For each $a \in \bZ$ such that $\RS(a)$ contains a CRS modulo $4$,
  $4$ divides $a - 1$.
\end{theorem}

\begin{proof}
  Let $\equiv$ denote the congruence relation modulo~$4$.
  A straightforward induction on $n$ yields
  for every $n \in \bN$.
  It follows $\RS(- 1) = \{ 0, 1 \}$
,
  and thus $\RS(- 1)$ does not contain any CRS modulo~$4$.
  Therefore, if $a \equiv - 1$ then $S(n, a) \equiv 0$ or $S(n, a) \equiv 1$ for every $n \in \bN$.
  It follows $a \equiv - 1$ implies 
  Assume that $\RS(a)$ contains a CRS modulo~$4$.
  Then, Theorem~\ref{thm:p-divides-a-1} ensures that $a - 1$ is even,
  whence $a \equiv 1$ or $a \equiv  - 1$.
   
\end{proof}




\begin{theorem} \label{thm:a-invertible-m}
  Let $a$, $b \in \bZ$, let $m \in \bNtrois$, and let $\left( u_n \right)_{n \in \bN} \in \bZ^{\bN}$ be such that
  $u_{n + 1} = a u_n + b$ for every $n \in \bN$
  and
  $\left\{ u_n : n \in \bN \right\} $ contains a complete residue system modulo~$m$.
  Then, $a$ and $m$ are coprime.
\end{theorem}

\begin{proof}
  Since $m$ is larger than $2$,
  $b - 1$ and $b + 1$ are not congruent modulo $m$, 
  and thus there exists $\varepsilon \in \{ - 1, + 1 \}$ such that $u_0 \not\equiv b + \varepsilon \pmod{m}$.
  Since  $\left\{ u_n : n \in \bN \right\} $ contains a complete residue system modulo $m$,
  there exists $k \in \bN$ such that $u_k \equiv b + \varepsilon \pmod{m}$.
  By construction, $k$ is positive, whence  $u_k = a u_{k - 1} + b$.
  It follows $a  u_{k - 1}  \equiv  \varepsilon  \pmod{m}$
  or equivalently,
  $a  u_{k - 1} \varepsilon  \equiv  1  \pmod{m}$.
  Therefore, $a$ is invertible modulo $m$,
  or equivalently,
  $a$ and $m$ are coprime.
\end{proof}

\begin{theorem}
  Let the notation be as in Theorem~\ref{thm:a-invertible-m}.
  For every $i$, $j \in \bN$,
  $u_i \equiv u_j \pmod{m}$ is equivalent to $i \equiv j \pmod{m}$. 
\end{theorem}

\begin{proof}
  Let $G$ denote the set of those $k \in \bZ$ such that
  for which there exist $i$, $j \in \bN$ such that
   $i - j = k$ implies $u_i \equiv u_j \pmod{m}$.
\end{proof}

  

\begin{theorem} \label{thm:m-odd-prime-divides-a-1}
  Let the notation be as in Theorem~\ref{thm:a-invertible-m}.
  Then, $m$ and $a - 1$ are not coprime.
\end{theorem}

\begin{proof}
  Put $v_n = (a - 1) u_n + b$ for each $n \in \bN$ and $V = \left\{ v_n : n \in \bN \right\}$.
%  If $a - 1$ and $m$ are coprime then $V$ contains a complete residue system modulo~$m$.
 % Therefore, it suffices to check that $V$ does not contain any complete residue system modulo~$m$.
  For each $n \in \bN$, straightforward computations yield
  $$
  v_{n + 1}  = (a - 1)(a u_n + b) + b = a ((a - 1) u_n + b) = a v_n \,, 
  $$
  whence $v_n = a^n v_0$ for every $n \in \bN$.
  First, assume that $v_0$ and $m$ are coprime.
  Since $a$ and $m$ are coprime by Theorem~\ref{ },
  $v_n$ and $m$ are coprime for every $n \in \bN$,
  and thus $V$  does not contain any complete residue system modulo~$m$.
  Now, assume that $v_0$ and $m$ are not coprime.
  Then, we have $v_n \not \equiv 1 \pmod{m}$ for every $n \in \bNast$.
  
  

\end{proof}

\begin{theorem}
  Let the notation be as in Theorem~\ref{thm:a-invertible-m}.
  If $m = 4$ then $4$ divides $a - 1$.
\end{theorem}

\begin{proof}
\end{proof} 



% \include{additional}

 For each $n \in \bZ \setminus \{ 0 \}$, let $\rho(n)$ denote the \emph{radical} of $n$:
 $\rho(n)$ largest square-free divisor of $n$,
 or equivalently,
 $\rho(n)$ is the product of the distinct prime factors of~$n$.
 For instance,  we have $\rho(243936) = 462$ because
 $243936 = 2^5 \times 3^2 \times 7 \times {11}^2$ and
 $462 = 2 \times 3 \times 7 \times 11$.
  % $$
 % \rho'(n) =
 % \begin{cases}
 %   \rho(n) & \text{if $4$ does not divide $n$}  \\
 %   2 \rho(n) & \text{otherwise} 
 % \end{cases}
 % $$
 
 For each $m \in \bNast$,
 let $N(m)$ denote the set of those $n \in \bZ$ that satisfy the following two equivalent properties:
 \begin{enumerate}
 \item Every prime factor of $m$ divides $n$.
 \item There exists $r \in \bN$ such that $m$ divides $n^r$.
 \end{enumerate}
 For each $m \in \bN$, put
 $$
 N'(m) =
 \begin{cases}
   N(m)& \text{if $4$ does not divide $m$} \\
   2 N(m)& \text{if $4$ divides $m$} \\
  \end{cases} 
 $$ 
 
 For each $m \in \bNast$,
let $N(m)$ denote the set of those $n \in \bZ$ that satisfy the following two properties:
  \begin{enumerate}
     \item every prime factor of $m$ divides $n$ and
     \item if $4$ divides $m$ then $4$ divides $n$.
     \end{enumerate}
     
 \begin{exercise}
   \begin{enumerate}
   \item Prove that $N(m)$
   \item Let $m \in \bNast$ be such that $4$ does not divide~$m$.
     Find 
   \item Let $m \in \bNast$, let $r\in \bN$ be such that $m \le 2^r$,  and let $n \in \bZ$.
Prove that every prime factor of $m$ divides $n$ if, and only if, $m$ divides $n^r$.
\item Find a efficient algorithm that  decides
  $$\left\{ (m, n) \in \bNast \times \bZ  : n \in N(m) \right\}$$
   \end{enumerate}  
\end{exercise}

$$
z^d = 0
$$

$$
(\ttx + z)^{k + d} = \sum_{j = 0}^{d - 1}  \binom{k + d}{j} z^j  \ttx^{k + d  - j} 
$$

$$
\ttx^d S(n, \ttx + z) = \sum_{j = 0}^d   \binom{k}{j} z^j \ttx^{n - j}
$$
   $$
   S(n, \ttx) = \sum_{k = 0}^{n - 1} \ttx^k  = \frac{\ttx^n - 1}{\ttx - 1} 
   $$
   


 $$
 S(p, 1 + \ttx) - S(p, 1 + \ttx^2)
 = \frac{{(1 + \ttx)}^p - {(1 + \ttx^2)}^p}{\ttx}
 = 
 $$

 $$
 S(p, 1 + \ttx^k) =  p + \frac{p(p - 1)}{2} \ttx^k  + \ttx^{2k} f(\ttx^k) 
 $$

 $$
 S(p, 1 + \ttx) -  S(p, 1 + \ttx^k)  = \frac{p(p - 1)}{2} \ttx(1 - \ttx^{k - 1}  - 
 $$
 $$
 $$

   $$
   S(n, 1 + \ttx) = \frac{{(1 + \ttx)}^n - 1}{\ttx} = n + \frac{n(n - 1)}{2} \ttx + \ttx^2 f(\ttx) \,,
   $$
  



% The following theorem is only proven for the sake of completeness.



\begin{theorem}
  Let $a$, $m \in \bZ$ be such that $a \in A(m)$.
\end{theorem}

% 1
Assume that $4$ divides $a - 1$.
Then, for each prime factor $p$ of $m$, $2p$ divides $a - 1$.
% 2
Assume that $m$ is odd and that $a - 1$ is even.
Then, for each prime factor $p$ of $m$, $2p$ divides $a - 1$.
% 3
Assume that both $m$ and $a - 1$ are odd.
Then, $a + m - 1$ is even.
Therefore, for each prime factor $p$ of $m$, $2p$ divides $a + m - 1$.
% 4 
Assume that $m$ is even and that $4$ does not divide $a - 1$.
Then, $m \mathbin{/} 2$ is odd, $a - 1$ is even, and ${(a - 1)} \mathbin{/} 2$ is odd.
It follows that $4$ divides $a + m - 1$.
Therefore, for each prime factor $p$ of $m$, $2p$ divides $a + m - 1$.




% $a' = 1 + (a - 1)(m + 1)$
% $a' - 1 = (a - 1)(m + 1)$
$a' = 1 + (2 m + 1)(a - 1)$
$a' - 1 = (2 m + 1)(a - 1)$
 

\begin{theorem}
  For every $a \in \bZ$ and every  $m \in \bN$, 
  every prime factor of $m$ divides $a - 1$ if, and only if, $m$ divides $S(m, a)$.
\end{theorem}

\begin{proof}
  Assume that $m$ divides $S(m, a)$.
  $p$ divides $m$.
  $p$ divides $a^n - 1$
\end{proof}



Put $m = 3$ and $a = 5$.
$$
S(3, 2) = 7
$$
$$
S(3, 5) = 31
$$
$$
S(3, 4) = 21
$$






  
 

 \begin{theorem}
   Let $U$ be a finite set  and let $\left(u_n \right)_{n \in \bN} \in \bZ^\bN$.
   Assume that there exists a function$f\colon U \to U$
   such that  $u_{n + 1} = f(u_n)$ for every $n \in \bN$.
   Let $m$ denote the cardinality of~$U$.
   The following three assertions are equivalent
   \begin{enumerate}
     \item The sets  $U = \{ u_n : n \in \bN \}$ holds true.
     \item The sequence $\left(u_n \right)_{n \in \bN}$ is $m$-periodic.
      \item For every prime factor $p$ of $m$, $u_{m \mathbin{/} p}$ is distinct from $u_0$.
    \end{enumerate}
   \end{theorem}
 
 \begin{theorem}
   Let $m \in \bNast$ and let $\left(u_n \right)_{n \in \bN} \in \bZ^\bN$.
   Assume that there exists $f \colon \bZ \to \bZ$ such that  $u_{n + 1} = f( u_n)$ for every $n \in \bN$.
   The set $\left\{ u_n : n \in \bN \right\}$ contains a complete residue system modulo $m$
   if, and only if,
   the sequence $\left(u_n \bmod m \right)_{n \in \bN}$ is $m$-periodic.
 \end{theorem}


 \begin{theorem} \label{thm:a-and-m-coprime}
   Let $m \in \bN \setminus \{ 0, 2 \}$,
   let $a$, $b \in \bZ$, and
   let $\left(u_n \right)_{n \in \bN} \in \bZ^\bN$ be such that
   $$u_{n + 1} \equiv a u_n + b \pmod m$$
   for every $n \in \bN$.
   \begin{enumerate}
     \item 
       The set $\left\{ u_n : n \in \bN \right\}$ contains a complete residue system modulo~$m$.
      \item 
        The set $\left\{ u_0, u_1, \dotsc, u_{m - 1} \right\}$ is a complete residue system modulo~$m$.
      \item
        For every $i$, $j \in \bN$, $u_i \equiv u_j \pmod m$ is equivalent to $i - j \in m \bZ$.
%        The sequence  $\left(u_n \bmod m  \right)_{n \in \bN}$ is periodic and its least period equals~$m$.
    \end{enumerate} 
 \end{theorem}

 
 \begin{proof}
   Since there is nothing to prove in the case where $m = 1$, we may assume $m \ge 3$ for the rest of the proof.
   Then,
   there exists $\varepsilon \in \{ -1, + 1 \}$ such that $\varepsilon \not \equiv u_0 - b \pmod m$,
   and subsequently,
   there exists $i \in \bN$ such that $u_i \equiv b + \varepsilon \pmod m$.
   By construction, $i$ is positive.
   Put $a' = - \varepsilon u_{i - 1}$.
   We have  $a  u_{i - 1}  \equiv \varepsilon  \pmod m$, or equivalently,
 
   
   

   

  %  Then, there exist $i$, $j \in \bN$ such that
  %  $u_i \ne u_0$,
   
  % $u_j \ne u_0$, and
  % $u_i \ne u_j$.
  % Let $k \in \bN$ be such that $u_k = u_ju_i^{-1}u_0$.
  % By construction, $ijk$ is positive.
  % Let $p \in \bN$ be such that $u_p = u_{i - 1} u_{j - 1}^{-1} u_{k - 1}$.
   Assume that that there exists a prime number $p$ that divides both $b$ and~$m$.
   First,  assume that $p$ divides $a$.
   Then, $p$ divides $u_{n + 1}$ for every $n \in \bN$.
   $$
    u_k \equiv 0
   $$

 
   
   
   Put $d = \gcd(a, m)$.
   $u_k \equiv 1$
   A straightforward induction on $n$ shows that $d$ divides    Assume that there exists a pri
   
 \end{proof}
 

 \begin{theorem} \label{thm:b-and-m-coprime}
   Let the notation be as in Theorem~\ref{thm:a-and-m-coprime}.
   If $\left\{ u_n : n \in \bN \right\}$ contains a complete residue system modulo $m$ then $b$ and $m$ are coprime.
 \end{theorem} 

 \begin{proof}
 

    Assume that  $\left\{ x_n : n \in \bN \right\}$ contains a complete residue system modulo~$m$.
    In particular, there  exists $k \in \bN$ such that $m$ divides $u_k$.
    \end{proof}
  
 \begin{theorem} \label{thm:order-exponent}
   Let $G$ be an abelian group and let $(\alpha, b)$ be a prout of~$G$.
   The order of $b$ equals the exponent of~$G$.
 \end{theorem}

 \begin{proof}

 \end{proof}

 \section{Powers of $2$}
   



 \begin{theorem} \label{thm:4-in-the-middle}
   For every $a \in \bZ$, the following three asertions are equivalent:
%   $a$ is odd, $a^2 \equiv 1 \pmod 4$, and $\nu(a² - 2) = 1$.
 \end{theorem}

 \begin{proof}
   For each $b \in \bZ$, the following three assertions are clearly equivalent:
   $a - 2 = 2 (2b - 1)$,
   $a = 4 b$, and
   $a + 2 = 2 (2b + 1)$.
 \end{proof}


$$
{(1 + x)}^p \equiv 1 + p x \pmod {x^2}
$$
$$
{(1 + q x)}^p \equiv 1 + p q  x  \pmod{q^2 x^2}
$$

$$
s(p, a)
= \frac{a^p - 1}{a - 1}
\equiv p \pmod{a - 1}
$$



$$
S(np, a) = S(n, a^p) S(p, a)
$$

$$
S(np, a) = S(n, a) S(p, a^n) 
$$

$$
\frac{S(np, a)}{npq}  = \frac{S(n, a)}{nq} \frac{S(p, a^{nq})}{p} 
$$



$$
{(1 + q x)}^p \equiv  1 + p q x + \frac{p(p - 1)}{2} q^2  x^2  \pmod{q^3 x^3}
$$

$$
s(p, 1 + q x) = \frac{{(1 + q x)}^p - 1}{q x} \equiv  p  +   \frac{(p - 1)}{2} p q  x \pmod {q^2 x^2}
$$


$$
\frac{s(p, 1 + p x)}{p}  \equiv  1 + p \frac{p - 1}{2} x   \pmod{p x^2}
$$
 
 
 
 \begin{theorem} \label{thm:nu-power-2}
   Let $n \in \bN$ and let $a \in \bZ$.
   If $a \ne 1$ and  $a \equiv 1 \pmod 4$ then $ \nu(a^{2^n} - 1) = \nu(a - 1)  + n$.
 \end{theorem}


 \begin{proof}
   Let $n \in \bN$ be fixed.
   Put $a_n = a^{2^n}$.
   $$
   a_n \equiv 1 \pmod 4
   $$
   and
   $$
   a_{n + 1} - 1 = (a_n - 1) (a_n + 1) \,. 
   $$
   The former equation 
   Besides,  for every  $x \in \bZ$, $x \equiv 2 \pmod 4$ is equivalent to  $\nu(x) = 1$.
   It follows 
   $$
   \nu(a_{n + 1} - 1) = \nu(a_n - 1) + \nu(a_n + 1) = \nu(a_n - 1) + 1
   $$
   
   % A straightforward induc   tion on $n$ yields $a_n \equiv 1 \pmod 4$ for every $n \in \bN$.

   Therefore, equality 
   For each $n \in \bN$,
   we thus have  $\nu(a_n + 1) = 1$, and consequently
   $$
   \nu(a_{n + 1} - 1) = \nu(a_n - 1) + 1 
   $$
   because
   $$
   a_{n + 1} - 1 = (a_n - 1) (a_n + 1) \,.
   $$
   The desired result follows from the latter equation and a straightforward induction on~$n$.
 \end{proof}

 
 \begin{theorem} \label{thm:nu-power-2}
   For every $n \in \bNast$ and every odd $a \in \bZ$,
   equality
   $$
   \nu(a^{2^n} - 1) = \nu(a - 1) + \nu(a + 1) - 1 + n 
   $$
   holds true.
 \end{theorem}


 \begin{proof}
   Put $a_n = a^{2^n}$ for each $n \in \bN$.
   Since 
   \begin{equation} \label{eq:xn-rec-xn+1-1}
   a_{n + 1} - 1 = (a_n - 1) (a_n + 1) 
   \end{equation}
   for every  $n \in \bN$,
   a straightforward induction on $n$ yields
   $$
   a_n - 1 = (a - 1)(a + 1) \prod_{k = 1}^{n - 1} (a_k + 1) 
   $$
   for every $n \in \bNast$.
   It remains to prove $\nu(a_k + 1) = 1$ for each $k \in \bNast$.
   Let $n \in \bN$ be fixed.
   Since the set of all odd integers is closed under multiplication,
   $a_n$ is odd.
   Therefore, both $a_n - 1$ and $a_n + 1$  are even,
   and thus Equation~\eqref{eq:xn-rec-xn+1-1} ensures that $4$ divides
   $a_{n + 1} - 1 = (a_{n + 1} + 1) - 2$.
   % Besides,  for every $y \in \bZ$, $\nu(y)$ equals $1$ if, and only if, $4$ divides $y - 2$.
   Therefore Theorem~\ref{thm:4-in-the-middle} ensures  $\nu(a_{n + 1} + 1) = 1$.
 \end{proof}

  \begin{theorem}
    Let $n \in \bN$, let $a \in \bZ$, and let $\varepsilon \in \{ -1, + 1 \}$ be such that
    $a \equiv \varepsilon \pmod 4$ and
    $a \not \equiv \varepsilon \pmod{2^n}$.
    The multiplicative order of $a$ modulo $2^n$ equals $2^{n - \nu(a - \varepsilon)}$.
  \end{theorem}
  
  \begin{proof}
    If $n < 3$ then there is nothing to prove.
    Put $m = n - \nu(a - \varepsilon)$ and $M = 2^{m - 1}$.
    Since $2^n$ does not divide $a - \varepsilon$,
    $m$ is a positive integer, and thus
    Theorem~\ref{thm:nu-power-2} ensures $\nu(a^{2M} - 1) = n$
    It follows $a^{2M} \equiv 1 \pmod{2^n}$, or equivalently, 
    the multiplicative order of $a$ modulo $2^n$ divides $2M = 2^m$.
    It remains to prove $a^M \not \equiv 1 \pmod{2^n}$.
    Let us first assume $\varepsilon = 1$ or $m > 1$.
    Then, Theorem~\ref{thm:nu-power-2} ensures $\nu(a^M - 1) = n - 1$, whence $a^M \not \equiv 1 \pmod{2^n}$
    Let us now assume $\varepsilon = - 1$ and $m = M = 1$.
     $a \equiv - 1 \pmod 4$
    $a \not \equiv 1 \pmod{2^n}$   
    
  \end{proof}

 \begin{theorem}
   Let $\phi\colon \bZ \times \bZ \to \bZ$ be defined by:
   $\phi(x, y) = {(- 1)}^x 5^y$ for every $x$, $y \in \bZ$.
   For each $n \in \bN$, $\phi$ induces an isomorphism
   from the additive group $(\bZ / 2  \bZ) \times (\bZ / 2^n \bZ)$
   onto
   the multiplicative subgroup $\bZ / 2^{n + 2} \bZ$.
 \end{theorem}

 \begin{proof}
   $$
   \nu(5^{2^{n}} - 1) = \nu(4) + \nu(6) - 1  + n  = 2 + 1 - 1 + n = n + 2
   $$
   $$
   \nu(5^{2^{n - 1}} - 1) = \nu(4) + \nu(6) - 1  + (n - 1)  = 2 + 1 - 1 + (n - 1) = n + 1
   $$
 \end{proof}



  
 \begin{theorem}
   For every $n \in \bN \setminus \{ 0, 1 \}$ and every $a \in \bZ$,
   $\left\{  s_k(a) : k \in \bN \right\}$ contains a complete residue system modulo $2^n$  if, and only if,
   $4$ divides $a - 1$.
 \end{theorem}

 \begin{proof}
   Let $n \in \bN \setminus \{ 0, 1 \}$ and let $a \in \bZ$ be fixed.
   For each $x \in \bZ$, let $\bar x$ denote the residue class of $x$ modulo $2^n$.
   Our task is to prove that the period of $\left\{  s_k(\bar a) : k \in \bN \right\} = \bZ / 2^n \bZ$
   if, and only if, $4$ divides $a - 1$.    
   
 \end{proof}
 
 

 \begin{theorem}
   Let $n \in \bN$ and $x \in \bZ$ be odd.
   \begin{enumerate}
   \item $2^{n + 2}$ divides $x^{2^n} - 1$.
   \item $2^{n + 1}$ does not divide $x^{2^n} - 1$ if, and only if, $8$ divides $x - 5$.
   \end{enumerate}  
 \end{theorem}


 

 \begin{theorem}
   For each $n \in \bN$, the  additive group  $(\bZ / 2^n \bZ) \times (\bZ / 2 \bZ)$ admits a prout
   if, and only if, $n$ is not greater than~$1$.
 \end{theorem}

 \begin{proof}
   Put $G = (\bZ / 2^n \bZ) \times (\bZ / 2 \bZ)$.
   By Theorem~\ref{ } the order of $b$ equals $2^n$.
   Let $u$, $v \in G$ be such that $G = \bZ u + \bZ v$ and $2^n u = 2 v = 0$.
   $$
   \left\{ g \in G : 2 g = 0 \right\}  = \left\{ 0, v, 2^{n - 1} u, 2^{n - 1} u + v  \right\} 
   $$

   $$
   \left\{ g \in G : 2^{n - 1} g \ne 0 \right\}  = \left\{ (2 k + 1) u  \right\} 
   $$
   

   Let $(\alpha, b)$ be a prout of~
   $b = i u + j v$
   
   $\alpha(b) =  k u + v $
    

  
   

 
   
   
   % Let $\alpha\colon G \to G$ be defined by:
 
   % Let $n \in \bN \setminus \{ 0, 1 \}$ be fixed.
   % Put $G 
   % For each $n
   % Let $u$, $v \in G$ such that $G = \bZ u + \bZ v$

 
   % The order of $k u + v$ (resp.~$k u$) equals $2^n$ if and only if, $k$ is odd.
   

   % Exactly $3$ elements of $G$ are of order $2$:
   % $v$, $2^{n - 1} u$, and $2^{n - 1} u + v$.

   % $$
   % \alpha(2^{n - 1} u) = 2^{n - 1} \alpha(u) = 2^{n - 1} u
   % $$
   
   % +  v                v
   % + 2^{n - 1} u + v = 2^{n - 1} u 
   % + v               = 2^{n - 1} u + v   
   % + 2^{n - 1} u + v = 0
   % + v               = v 
   % + 2^{n - 1} u + v
   % + v
   % Assume $\alpha(v) = 2^{n - 1} u  + v$.
   
   % $$
   % \alpha ( 2^{n - 1} u  + v) = \alpha(2^{n - 1} u) + \alpha(v) = 2^{n - 1} u + \alpha(v)
   % $$

   % $\alpha$ is not injective.

   % $$
   % \alpha(u) = m u + v
   % $$

   % $$
   % \alpha^2(u) = m^2 u + v + \alpha(v)
   % $$

   % $$
   % \alpha^k(u) = m^k u + \sum_{j = 0}^k \alpha^k(v) 
   % $$

   
   
 \end{proof}
 
 
\begin{theorem} 
  Let $G$ be a multiplicative monoid,
  let $\alpha$ be an endomorphism of $G$,
  let $b$, $c \in G$, and
  let $\left( g_n \right)_{n \in \bN} \in G^\bN$ be such that $b \alpha(g_0) = g_0 c$.
  Equality $g_{n + 1} = b \alpha(g_n)$ holds true for every $n \in \bN$ if, and only if, 
  equality $g_{n + 1} = g_n \alpha^n(c)$ holds true for every $n \in \bN$.
\end{theorem}

\begin{proof}
  Put $b_n  = b \alpha(g_n)$ and $c_n =  g_n \alpha^n(c)$ for each $n \in \bN$.
  Equality $b_0  =  c_0$ holds true by assumption,
  and for each $n \in \bN$ such that $g_{n + 1} = b_n = c_n$,
  straightforward computations yield
  $$
  b_{n + 1} = b \alpha(g_{n + 1})
  = b \alpha (g_n \alpha^n(c))
  = b \alpha(g_n) \alpha^{n + 1}(c)
  = g_{n + 1}  \alpha^{n + 1}(c) = c_{n + 1}  \,.
  $$
  Therefore,
  if equality $g_{n + 1} = b_n$ holds true for every $n \in \bN$
  then it follows from a simple induction on $n$  equality $g_{n + 1} = c_n$ holds true for every $n \in \bN$.
  
  % Let $\left( b_n \right)_{n \in \bN} \in G^\bN$ be given by:
  % $b_0 = g_0$ and $b_{n + 1} = b \alpha(b_n)$ for every $n \in \bN$.
  % Let $\left( c_n \right)_{n \in \bN} \in G^\bN$ be given by:
  % $c_0 = g_0$ and $c_{n + 1} = c_n \alpha^n(c)$ for every $n \in \bN$.
  Put $c_n =  \alpha^n(c)$ for each $n \in \bN$, 
  $$
  B = \left\{ n \in \bN :g_{n + 1} = b \alpha(g_n) \right\} \,,  
  $$
  and
  $$
  C = \left\{ n \in \bN :g_{n + 1} = g_n c_n \right\} \, .  
  $$
  % Let $B$ denote the set of those $n \in \bN$ such that $g_{n + 1} = b \alpha(g_n)$ and 
  % let $C$ denote the set of those $n \in \bN$ such that $g_{n + 1} = g_n \alpha^n(c)$.
  Our task is to prove that $B = \bN$ is equivalent to $C = \bN$.
  Since $b \alpha(g_0) = g_0 c_0$ by assumption,
  $0 \in B$ is equivalent to $0 \in C$.
  Moreover, for each $n \in B \cap C$,
  straightforward computations yield
  $$
  b \alpha(g_{n + 1})
  = b \alpha (g_n c_n)
  = b \alpha(g_n) c_{n + 1}
  = g_{n + 1} c_{n + 1} \,, 
  $$
  whence $n + 1 \in B$ is equivalent to $n + 1 \in C$.
  Moreover, for each $n \in C$ such that $\{ n, n + 1 \} \subseteq B$,
  straightforward computations yield
  $$
  g_{n + 2}
  = b \alpha(g_{n + 1})
  = b \alpha (g_n c_n)
  = b \alpha(g_n) c_{n + 1}
  = g_{n + 1} c_{n + 1} \,, 
  $$
  whence $n + 1 \in C$.
  Therefore, $B = \bN$ implies $C = \bN$.
  It remains to prove the converse.
  For each $n \in B$ such that $\{ n, n + 1 \} \subseteq C$, straightforward computations yield
  $$
  g_{n + 2}
  = g_{n + 1} c_{n + 1} 
  = b \alpha(g_n) c_{n + 1} 
  = b \alpha\left(g_n c_n  \right)
  = b \alpha(g_{n + 1}) \,, 
  $$
  whence $n + 1 \in B$.
  Therefore, $C = \bN$ implies $B = \bN$.
\end{proof}


\begin{theorem}
  Let $G$ be an additive commutative monoid,
  let $\alpha$ be an endomorphism of $G$,
  let $b$, $c \in G$, and
  let $\left( g_n \right)_{n \in \bN} \in G^\bN$ be such that $\alpha(g_0) + b  = g_0 + c$.
  Equality $g_{n + 1} = \alpha(g_n) + b$ holds true for every $n \in \bN$ if, and only if, 
  equality
  $$g_n = g_0 + \sum_{k = 0}^{n - 1}  \alpha^k(c)
  $$
  holds true for every $n \in \bN$.
\end{theorem}



Put $c_n = \alpha^n(c)$.


$g_{n + 1} = b \alpha(g_n)$

$h_{n + 1} = h_n c_n$

Assume $g_n = h_n$ and $g_{n + 1} = h_{n + 1}$
$$
g_{n + 1} = h_n c_n 
$$


Put $b_n = \alpha^n(b)$ and $c_n = \alpha^n(c)$ for every $n \in \bN$.

$$
b_n \alpha^{n + 1}(g_0) = \alpha^n(g_0) c_n
$$

$$
g_n = b_0 b_1 b_2 \dotsm b_{n - 1}  \alpha^n(g_0)
$$

$$
g_n = g_0 c_0 c_1 c_2 \dotsm c_{n - 1} 
$$





$$
S(\ttx) = \sum_{k = 0}^{q - 1} {(1 + \ttx)}^k 
$$

$$
\ttx S(\ttx) = {(1 + \ttx)}^q - 1
$$

$$
{(1 + \ttx)}^q = 1 + \ttx^q 
$$

$$
\ttx S(\ttx)  = \ttx^q 
$$

$$
S(\ttx)  = \ttx^{q - 1}  
$$


\end{document}

% three equivalent properties:
% \begin{enumerate}
% \item

% \item
%   The cardinality of $X$ is not greater than $| m |$ and,
%   for each $y \in \bZ$, there exists at least one $x \in X$ such that $y \equiv x \pmod{m}$.
% \item
%   The cardinality of $X$ is not less than $| m |$ and,
%   for every $x$, $x' \in X$, $x \equiv x' \pmod{m}$ implies $x = x'$.
% \end{enumerate}
